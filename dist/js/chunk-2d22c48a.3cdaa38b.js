(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22c48a"],{f329:function(t,e,o){"use strict";o.r(e);var a=o("7a23"),n={class:"text-end"},i={class:"table mt-4"},c=Object(a["i"])("thead",null,[Object(a["i"])("tr",null,[Object(a["i"])("th",null,"名稱"),Object(a["i"])("th",null,"折扣百分比"),Object(a["i"])("th",null,"到期日"),Object(a["i"])("th",null,"是否啟用"),Object(a["i"])("th",null,"編輯")])],-1),s={class:"text-right"},l={class:"text-right"},d={key:0,class:"text-success"},u={key:1,class:"text-muted"},p={class:"btn-group"};function b(t,e,o,b,r,m){var O=Object(a["D"])("Loading"),j=Object(a["D"])("pagination"),h=Object(a["D"])("coupons-modal"),f=Object(a["D"])("del-coupons-modal");return Object(a["u"])(),Object(a["e"])(a["a"],null,[Object(a["i"])(O,{active:r.isLoading,"is-full-page":Boolean("true")},null,8,["active","is-full-page"]),Object(a["i"])("div",n,[Object(a["i"])("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=function(t){return m.openModal(!0)})},"新增優惠卷")]),Object(a["i"])("table",i,[c,Object(a["i"])("tbody",null,[(Object(a["u"])(!0),Object(a["e"])(a["a"],null,Object(a["B"])(r.coupons,(function(e,o){return Object(a["u"])(),Object(a["e"])("tr",{key:"key"+o},[Object(a["i"])("td",null,Object(a["G"])(e.title),1),Object(a["i"])("td",s,Object(a["G"])(e.percent)+"% ",1),Object(a["i"])("td",l,Object(a["G"])(t.$filters.ToLocalDate(e.due_date)),1),Object(a["i"])("td",null,[e.is_enabled?(Object(a["u"])(),Object(a["e"])("span",d,"啟用")):(Object(a["u"])(),Object(a["e"])("span",u,"未啟用"))]),Object(a["i"])("td",null,[Object(a["i"])("div",p,[Object(a["i"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(t){return m.openModal(!1,e)}},"編輯",8,["onClick"]),Object(a["i"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(t){return m.delModal(e)}},"刪除",8,["onClick"])])])])})),128))])]),Object(a["i"])(j,{pages:r.pagination,onEmitPage:m.UpdatePage},null,8,["pages","onEmitPage"]),Object(a["i"])(h,{ref:"CouponsModal",isNew:r.isNew,data:r.tempCoupon,onUpdateCoupons:m.UpdateCoupons},null,8,["isNew","data","onUpdateCoupons"]),Object(a["i"])(f,{ref:"DelCouponsModal",data:r.tempCoupon,onDelCoupons:m.DelCoupons},null,8,["data","onDelCoupons"])],64)}var r=o("5530"),m=(o("99af"),o("1799")),O={class:"modal fade",tabindex:"-1","aria-hidden":"true",ref:"modal"},j={class:"modal-dialog",role:"document"},h={class:"modal-content border-0"},f={class:"modal-header bg-dark text-white"},g={class:"modal-title",id:"exampleModalLabel"},v=Object(a["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),C={class:"modal-body"},D={class:"row"},y={class:"mb-3"},w=Object(a["i"])("label",{for:"title",class:"form-label"},"名稱",-1),x={class:"mb-3"},M=Object(a["i"])("label",{for:"percent",class:"form-label"},"折扣百分比",-1),k={class:"mb-3"},_=Object(a["i"])("label",{for:"due_date",class:"form-label"},"到期日",-1),L={class:"mb-3"},P=Object(a["i"])("label",{for:"code",class:"form-label"},"優惠代碼",-1),N={class:"mb-3"},U=Object(a["i"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),$={class:"modal-footer"},G=Object(a["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function V(t,e,o,n,i,c){return Object(a["u"])(),Object(a["e"])("div",O,[Object(a["i"])("div",j,[Object(a["i"])("div",h,[Object(a["i"])("div",f,[Object(a["i"])("h5",g,[Object(a["i"])("span",null,Object(a["G"])(o.isNew?"新增":"修改")+"優惠卷",1)]),v]),Object(a["i"])("div",C,[Object(a["i"])("div",D,[Object(a["i"])("div",y,[w,Object(a["P"])(Object(a["i"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[1]||(e[1]=function(e){return t.tempData.title=e}),placeholder:"請輸入名稱"},null,512),[[a["K"],t.tempData.title,void 0,{trim:!0}]])]),Object(a["i"])("div",x,[M,Object(a["P"])(Object(a["i"])("input",{type:"number",class:"form-control",id:"percent","onUpdate:modelValue":e[2]||(e[2]=function(e){return t.tempData.percent=e}),placeholder:"請輸入折扣百分比，不填即為預設100%"},null,512),[[a["K"],t.tempData.percent,void 0,{number:!0}]])]),Object(a["i"])("div",k,[_,Object(a["P"])(Object(a["i"])("input",{type:"date",class:"form-control",id:"due_date","onUpdate:modelValue":e[3]||(e[3]=function(e){return t.tempData.due_date=e}),placeholder:"請輸入到期日",pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}"},null,512),[[a["K"],t.tempData.due_date]])]),Object(a["i"])("div",L,[P,Object(a["P"])(Object(a["i"])("input",{type:"text",class:"form-control",id:"code","onUpdate:modelValue":e[4]||(e[4]=function(e){return t.tempData.code=e}),placeholder:"請輸入優惠代碼"},null,512),[[a["K"],t.tempData.code,void 0,{trim:!0}]])]),Object(a["i"])("div",N,[Object(a["P"])(Object(a["i"])("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,id:"is_enabled","onUpdate:modelValue":e[5]||(e[5]=function(e){return t.tempData.is_enabled=e})},null,512),[[a["J"],t.tempData.is_enabled]]),U])])]),Object(a["i"])("div",$,[G,Object(a["i"])("button",{type:"button",class:"btn btn-primary",onClick:e[6]||(e[6]=function(t){return c.sure()})},"確認")])])])],512)}var K=o("85f5"),B={mixins:[K["a"]],props:{isNew:{type:Boolean}},data:function(){return{tempIsNew:!0}},methods:{sure:function(){this.$emit("update-coupons",this.tempData)}}};B.render=V;var J=B,S={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},T={class:"modal-dialog",role:"document"},E={class:"modal-content border-0"},I={class:"modal-header bg-danger text-white"},q={class:"modal-title"},z=Object(a["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),A={class:"modal-body"},F=Object(a["h"])(" 是否刪除 "),H={class:"text-danger"},Q=Object(a["h"])(" (刪除後將無法恢復)。 "),R={class:"modal-footer"},W=Object(a["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function X(t,e,o,n,i,c){return Object(a["u"])(),Object(a["e"])("div",S,[Object(a["i"])("div",T,[Object(a["i"])("div",E,[Object(a["i"])("div",I,[Object(a["i"])("h5",q,[Object(a["i"])("span",null,"刪除優惠卷： "+Object(a["G"])(t.tempData.title),1)]),z]),Object(a["i"])("div",A,[F,Object(a["i"])("strong",H,Object(a["G"])(t.tempData.title),1),Q]),Object(a["i"])("div",R,[W,Object(a["i"])("button",{type:"button",class:"btn btn-danger",onClick:e[1]||(e[1]=function(t){return c.sureDel()})},"確認刪除 ")])])])],512)}var Y={mixins:[K["a"]],methods:{sureDel:function(){this.$emit("del-coupons",this.tempData.id)}}};Y.render=X;var Z=Y,tt={data:function(){return{coupons:[],pagination:{},tempCoupon:{},isNew:!0,isLoading:!1}},inject:["emitter","$httpMessageState"],methods:{getCoupos:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("eason-api","/admin/coupons?page=").concat(e);this.isLoading=!0,this.axios.get(o).then((function(e){e.data.success&&(console.log(e),t.coupons=e.data.coupons,t.pagination=e.data.pagination,t.isLoading=!1)})).catch((function(t){console.log(t)}))},openModal:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.isNew=t,this.tempCoupon=Object(r["a"])({},e),!0===this.isNew||(this.tempCoupon=Object(r["a"])({},e),this.tempCoupon.due_date=this.$filters.ToLocalDate(this.tempCoupon.due_date)),this.$refs.CouponsModal.showModal()},delModal:function(t){this.tempCoupon=Object(r["a"])({},t),this.$refs.DelCouponsModal.showModal()},UpdateCoupons:function(t){var e=this,o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("eason-api","/admin/coupon"),a="post",n="新增";if(!1===this.isNew&&(o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("eason-api","/admin/coupon/").concat(t.id),a="put",n="修改"),this.isLoading=!0,this.tempCoupon=Object(r["a"])({},t),this.tempCoupon.due_date=Math.floor(new Date(this.tempCoupon.due_date).getTime()/1e3),this.isNew){var i=Object.prototype.hasOwnProperty.call(this.tempCoupon,"percent");i||(this.tempCoupon.percent=100);var c=Object.prototype.hasOwnProperty.call(this.tempCoupon,"is_enabled");c||(this.tempCoupon.is_enabled=0)}this.axios[a](o,{data:this.tempCoupon}).then((function(t){e.$httpMessageState(t,n),e.getCoupos(),e.$refs.CouponsModal.hideModal(),e.isLoading=!1})).catch((function(t){console.log(t)}))},DelCoupons:function(t){var e=this,o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("eason-api","/admin/coupon/").concat(t);this.isLoading=!0,this.axios.delete(o).then((function(t){e.$httpMessageState(t,"刪除"),e.getCoupos(),e.$refs.DelCouponsModal.hideModal(),e.isLoading=!1})).catch((function(t){console.log(t)}))},UpdatePage:function(t){this.getCoupos(t)}},created:function(){this.getCoupos()},components:{CouponsModal:J,DelCouponsModal:Z,Pagination:m["a"]}};tt.render=b;e["default"]=tt}}]);
//# sourceMappingURL=chunk-2d22c48a.3cdaa38b.js.map