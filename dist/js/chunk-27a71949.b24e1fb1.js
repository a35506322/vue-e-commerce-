(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27a71949"],{1799:function(e,t,a){"use strict";var i=a("7a23"),c={"aria-label":"Page navigation example"},n={class:"pagination justify-content-center"},s=Object(i["i"])("a",{class:"page-link",href:"#","aria-label":"Previous"},[Object(i["i"])("span",{"aria-hidden":"true"},"«")],-1),o={class:"page-link",href:"#"},r=Object(i["i"])("a",{class:"page-link",href:"#","aria-label":"Next"},[Object(i["i"])("span",{"aria-hidden":"true"},"»")],-1);function l(e,t,a,l,u,d){return Object(i["u"])(),Object(i["e"])("nav",c,[Object(i["i"])("ul",n,[a.pages.has_pre?(Object(i["u"])(),Object(i["e"])("li",{key:0,class:"page-item",onClick:t[1]||(t[1]=Object(i["Q"])((function(e){return d.emitPages(a.pages.current_page-1)}),["prevent"]))},[s])):Object(i["f"])("",!0),(Object(i["u"])(!0),Object(i["e"])(i["a"],null,Object(i["B"])(a.pages.total_pages,(function(e){return Object(i["u"])(),Object(i["e"])("li",{class:["page-item",{active:e===a.pages.current_page}],key:"key"+e,onClick:Object(i["Q"])((function(t){return d.emitPages(e)}),["prevent"])},[Object(i["i"])("a",o,Object(i["G"])(e),1)],10,["onClick"])})),128)),a.pages.has_next?(Object(i["u"])(),Object(i["e"])("li",{key:1,class:"page-item",onClick:t[2]||(t[2]=Object(i["Q"])((function(e){return d.emitPages(a.pages.current_page+1)}),["prevent"]))},[r])):Object(i["f"])("",!0)])])}var u={props:["pages"],methods:{emitPages:function(e){this.$emit("emit-page",e)}}};u.render=l;t["a"]=u},"1dde":function(e,t,a){var i=a("d039"),c=a("b622"),n=a("2d00"),s=c("species");e.exports=function(e){return n>=51||!i((function(){var t=[],a=t.constructor={};return a[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var i=a("1d80"),c=a("5899"),n="["+c+"]",s=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),r=function(e){return function(t){var a=String(i(t));return 1&e&&(a=a.replace(s,"")),2&e&&(a=a.replace(o,"")),a}};e.exports={start:r(1),end:r(2),trim:r(3)}},"65f0":function(e,t,a){var i=a("861d"),c=a("e8b5"),n=a("b622"),s=n("species");e.exports=function(e,t){var a;return c(e)&&(a=e.constructor,"function"!=typeof a||a!==Array&&!c(a.prototype)?i(a)&&(a=a[s],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===t?0:t)}},7156:function(e,t,a){var i=a("861d"),c=a("d2bb");e.exports=function(e,t,a){var n,s;return c&&"function"==typeof(n=t.constructor)&&n!==a&&i(s=n.prototype)&&s!==a.prototype&&c(e,s),e}},8418:function(e,t,a){"use strict";var i=a("c04e"),c=a("9bf2"),n=a("5c6c");e.exports=function(e,t,a){var s=i(t);s in e?c.f(e,s,n(0,a)):e[s]=a}},"99af":function(e,t,a){"use strict";var i=a("23e7"),c=a("d039"),n=a("e8b5"),s=a("861d"),o=a("7b0b"),r=a("50c4"),l=a("8418"),u=a("65f0"),d=a("1dde"),b=a("b622"),p=a("2d00"),f=b("isConcatSpreadable"),O=9007199254740991,j="Maximum allowed index exceeded",g=p>=51||!c((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),m=d("concat"),h=function(e){if(!s(e))return!1;var t=e[f];return void 0!==t?!!t:n(e)},v=!g||!m;i({target:"Array",proto:!0,forced:v},{concat:function(e){var t,a,i,c,n,s=o(this),d=u(s,0),b=0;for(t=-1,i=arguments.length;t<i;t++)if(n=-1===t?s:arguments[t],h(n)){if(c=r(n.length),b+c>O)throw TypeError(j);for(a=0;a<c;a++,b++)a in n&&l(d,b,n[a])}else{if(b>=O)throw TypeError(j);l(d,b++,n)}return d.length=b,d}})},a9e3:function(e,t,a){"use strict";var i=a("83ab"),c=a("da84"),n=a("94ca"),s=a("6eeb"),o=a("5135"),r=a("c6b6"),l=a("7156"),u=a("c04e"),d=a("d039"),b=a("7c73"),p=a("241c").f,f=a("06cf").f,O=a("9bf2").f,j=a("58a8").trim,g="Number",m=c[g],h=m.prototype,v=r(b(h))==g,y=function(e){var t,a,i,c,n,s,o,r,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=j(l),t=l.charCodeAt(0),43===t||45===t){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:i=2,c=49;break;case 79:case 111:i=8,c=55;break;default:return+l}for(n=l.slice(2),s=n.length,o=0;o<s;o++)if(r=n.charCodeAt(o),r<48||r>c)return NaN;return parseInt(n,i)}return+l};if(n(g,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var x,k=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof k&&(v?d((function(){h.valueOf.call(a)})):r(a)!=g)?l(new m(y(t)),a,k):y(t)},C=i?p(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),_=0;C.length>_;_++)o(m,x=C[_])&&!o(k,x)&&O(k,x,f(m,x));k.prototype=h,h.constructor=k,s(c,g,k)}},aaaa:function(e,t,a){"use strict";a.r(t);var i=a("7a23"),c={class:"container"},n={class:"row mt-4"},s={class:"col-md-7"},o={class:"table mt-4"},r=Object(i["i"])("thead",null,[Object(i["i"])("tr",null,[Object(i["i"])("th",null,"圖片"),Object(i["i"])("th",null,"商品名稱"),Object(i["i"])("th",null,"價格"),Object(i["i"])("th")])],-1),l={style:{width:"200px"}},u={href:"#",class:"text-dark"},d={key:0,class:"h5"},b={key:1,class:"h6"},p={key:2,class:"h5"},f={class:"btn-group"},O={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status","aria-hidden":"true"},j=Object(i["i"])("span",{class:"visually-hidden"},"Loading...",-1),g=Object(i["h"])(" 加到購物車 "),m={class:"col-md-5"},h={class:"sticky-top"},v={class:"table align-middle"},y=Object(i["i"])("thead",null,[Object(i["i"])("tr",null,[Object(i["i"])("th"),Object(i["i"])("th",null,"品名"),Object(i["i"])("th",{style:{width:"150px"}},"數量"),Object(i["i"])("th",null,"單價")])],-1),x={key:0},k=Object(i["i"])("i",{class:"bi bi-trash"},null,-1),C={key:0,class:"text-success"},_={class:"input-group input-group-sm"},L=Object(i["i"])("div",{class:"input-group-text"},"/ 單位",-1),I={class:"text-end"},N={key:0,class:"text-success"},V=Object(i["i"])("td",{colspan:"3",class:"text-end"},"總計",-1),P={class:"text-end"},w={key:0},E=Object(i["i"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),U={class:"text-end text-success"},A={class:"input-group mb-3 input-group-sm"},S={class:"input-group-append"},G={class:"my-5 row justify-content-center"},q={class:"col-md-4"},F={class:"mb-3"},T=Object(i["i"])("label",{for:"email",class:"form-label"},"Email address",-1),D={class:"mb-3"},M=Object(i["i"])("label",{for:"recipient",class:"form-label"},"收件人姓名",-1),B={class:"mb-3"},R=Object(i["i"])("label",{for:"phone",class:"form-label"},"收件人電話",-1),J={class:"mb-3"},Q=Object(i["i"])("label",{for:"address",class:"form-label"},"收件人地址",-1),$={class:"mb-3"},K=Object(i["i"])("label",{for:"leave_message",class:"form-label"},"留言",-1),X={class:"text-end"},Y={key:0,class:"text-light spinner-border  spinner-border-sm",role:"status"},z=Object(i["i"])("span",{class:"visually-hidden"},"Loading...",-1),H=Object(i["h"])(" 送出訂單 ");function W(e,t,a,W,Z,ee){var te=Object(i["D"])("Loading"),ae=Object(i["D"])("pagination"),ie=Object(i["D"])("Field"),ce=Object(i["D"])("error-message"),ne=Object(i["D"])("Form");return Object(i["u"])(),Object(i["e"])(i["a"],null,[Object(i["i"])(te,{active:Z.isLoading},null,8,["active"]),Object(i["i"])("div",c,[Object(i["i"])("div",n,[Object(i["i"])("div",s,[Object(i["i"])("table",o,[r,Object(i["i"])("tbody",null,[(Object(i["u"])(!0),Object(i["e"])(i["a"],null,Object(i["B"])(Z.products,(function(e,t){return Object(i["u"])(),Object(i["e"])("tr",{key:"key"+t},[Object(i["i"])("td",l,[Object(i["i"])("div",{style:[{backgroundImage:"url(".concat(e.imageUrl,")")},{height:"100px","background-size":"cover","background-position":"center"}]},null,4)]),Object(i["i"])("td",null,[Object(i["i"])("a",u,Object(i["G"])(e.title),1)]),Object(i["i"])("td",null,[e.price?Object(i["f"])("",!0):(Object(i["u"])(),Object(i["e"])("div",d,Object(i["G"])(e.origin_price),1)),e.price?(Object(i["u"])(),Object(i["e"])("del",b,"原價："+Object(i["G"])(e.origin_price),1)):Object(i["f"])("",!0),e.price?(Object(i["u"])(),Object(i["e"])("div",p,"現在只要："+Object(i["G"])(e.price),1)):Object(i["f"])("",!0)]),Object(i["i"])("td",null,[Object(i["i"])("div",f,[Object(i["i"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(t){return ee.getProdcut(e.id)}},"查看更多",8,["onClick"]),Object(i["i"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(t){return ee.addCart(e.id)},disabled:e.id===Z.status.isLoadingItem},[e.id===Z.status.isLoadingItem?(Object(i["u"])(),Object(i["e"])("div",O,[j])):Object(i["f"])("",!0),g],8,["onClick","disabled"])])])])})),128))])])]),Object(i["i"])("div",m,[Object(i["i"])("div",h,[Object(i["i"])("table",v,[y,Z.carts.length>0?(Object(i["u"])(),Object(i["e"])("tbody",x,[(Object(i["u"])(!0),Object(i["e"])(i["a"],null,Object(i["B"])(Z.carts,(function(e,t){return Object(i["u"])(),Object(i["e"])("tr",{key:"key"+t},[Object(i["i"])("td",null,[Object(i["i"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return ee.deleteCar(e.id)}},[k],8,["onClick"])]),Object(i["i"])("td",null,[Object(i["h"])(Object(i["G"])(e.product.title)+" ",1),Z.status.isCoupon?(Object(i["u"])(),Object(i["e"])("div",C," 已套用優惠券 ")):Object(i["f"])("",!0)]),Object(i["i"])("td",null,[Object(i["i"])("div",_,[Object(i["P"])(Object(i["i"])("input",{type:"number",min:"1",class:"form-control",disabled:Z.status.isUpdateLoading,"onUpdate:modelValue":function(t){return e.qty=t},onChange:function(t){return ee.updatedCart(e)}},null,40,["disabled","onUpdate:modelValue","onChange"]),[[i["K"],e.qty]]),L])]),Object(i["i"])("td",I,[Object(i["h"])(Object(i["G"])(e.product.price)+" ",1),Z.status.isCoupon?(Object(i["u"])(),Object(i["e"])("small",N,"折扣價："+Object(i["G"])(e.final_total),1)):Object(i["f"])("",!0)])])})),128))])):Object(i["f"])("",!0),Object(i["i"])("tfoot",null,[Object(i["i"])("tr",null,[V,Object(i["i"])("td",P,Object(i["G"])(Z.total),1)]),Z.status.isCoupon?(Object(i["u"])(),Object(i["e"])("tr",w,[E,Object(i["i"])("td",U,Object(i["G"])(Z.final_total),1)])):Object(i["f"])("",!0)])]),Object(i["i"])("div",A,[Object(i["P"])(Object(i["i"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return Z.coupon_code=e}),placeholder:"請輸入優惠碼"},null,512),[[i["K"],Z.coupon_code]]),Object(i["i"])("div",S,[Object(i["i"])("button",{class:"btn btn-outline-secondary",type:"button",disabled:Z.status.isUpdateLoading,onClick:t[2]||(t[2]=function(){return ee.addCoupon&&ee.addCoupon.apply(ee,arguments)})}," 套用優惠碼 ",8,["disabled"])])])])])])]),Object(i["i"])(ae,{pages:Z.pagination,onEmitPage:ee.updatePages},null,8,["pages","onEmitPage"]),Object(i["i"])("div",G,[Object(i["i"])("div",q,[Object(i["i"])(ne,{onSubmit:ee.onSubmit},{default:Object(i["O"])((function(e){var a=e.errors,c=e.meta,n=e.isSubmitting;return[Object(i["i"])("div",F,[T,Object(i["i"])(ie,{type:"email",name:"email",rules:"required|email",class:["form-control",{"is-invalid":a["email"]}],id:"email",placeholder:"請輸入Emal",modelValue:Z.form.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Z.form.user.email=e})},null,8,["class","modelValue"]),Object(i["i"])(ce,{name:"user.email",class:"invalid-feedback"})]),Object(i["i"])("div",D,[M,Object(i["i"])(ie,{class:["form-control",{"is-invalid":a["recipient"]}],name:"recipient",id:"recipient",rules:"required",placeholder:"請輸入姓名",modelValue:Z.form.user.recipient,"onUpdate:modelValue":t[4]||(t[4]=function(e){return Z.form.user.recipient=e})},null,8,["class","modelValue"]),Object(i["i"])(ce,{name:"recipient",class:"invalid-feedback"})]),Object(i["i"])("div",B,[R,Object(i["i"])(ie,{class:["form-control",{"is-invalid":a["phone"]}],name:"phone",id:"phone",rules:"required",placeholder:"請輸入電話",modelValue:Z.form.user.phone,"onUpdate:modelValue":t[5]||(t[5]=function(e){return Z.form.user.phone=e})},null,8,["class","modelValue"]),Object(i["i"])(ce,{name:"phone",class:"invalid-feedback"})]),Object(i["i"])("div",J,[Q,Object(i["i"])(ie,{class:["form-control",{"is-invalid":a["address"]}],id:"address",name:"address",rules:"required",placeholder:"請輸入地址",modelValue:Z.form.user.address,"onUpdate:modelValue":t[6]||(t[6]=function(e){return Z.form.user.address=e})},null,8,["class","modelValue"]),Object(i["i"])(ce,{name:"address",class:"invalid-feedback"})]),Object(i["i"])("div",$,[K,Object(i["i"])(ie,{class:"form-control",name:"leave_message",id:"leave_message",rows:"3",modelValue:Z.form.leave_message,"onUpdate:modelValue":t[7]||(t[7]=function(e){return Z.form.leave_message=e}),as:"textarea"},null,8,["modelValue"])]),Object(i["i"])("div",X,[Object(i["i"])("button",{type:"submit",class:"btn btn-danger",disabled:!c.valid},[n?(Object(i["u"])(),Object(i["e"])("div",Y,[z])):Object(i["f"])("",!0),H],8,["disabled"])])]})),_:1},8,["onSubmit"])])])],64)}a("99af"),a("a9e3"),a("d3b7"),a("ddb0");var Z=a("1799"),ee={data:function(){return{products:[],pagination:{},status:{isLoadingItem:"",isUpdateLoading:!1,isCoupon:!1},carts:[],total:0,final_total:0,isLoading:!1,coupon_code:"",form:{user:{recipient:"",email:"",phone:"",address:""},leave_message:""},schema:{form:{user:{recipient:"",email:"",phone:"",address:""},leave_message:""}}}},components:{Pagination:Z["a"]},methods:{getProducts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("eason-api","/products?page=").concat(t);this.isLoading=!0,this.axios.get(a).then((function(t){console.log(t),t.data.success&&(e.products=t.data.products,e.pagination=t.data.pagination,e.isLoading=!1)})).catch((function(e){console.log(e)}))},updatePages:function(e){this.getProducts(e)},getProdcut:function(e){this.$router.push("/user/product/".concat(e))},getCarts:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("eason-api","/cart");this.isLoading=!0,this.axios.get(t).then((function(t){console.log(t),t.data.success&&(e.carts=t.data.data.carts,e.total=t.data.data.total,e.final_total=t.data.data.final_total,e.isLoading=!1)})).catch((function(e){console.log(e)}))},addCart:function(e){var t=this,a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("eason-api","/cart");this.status.isLoadingItem=e,this.isLoading=!0,this.axios.post(a,{data:{product_id:e,qty:1}}).then((function(e){e.data.success&&(t.status.isLoadingItem="",t.getCarts(),t.isLoading=!1)})).catch((function(e){console.log(e)}))},deleteCar:function(e){var t=this,a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("eason-api","/cart/").concat(e);this.isLoading=!0,this.axios.delete(a).then((function(e){e.data.success&&(t.getCarts(),t.isLoading=!1)})).catch((function(e){console.log(e)}))},updatedCart:function(e){var t=this,a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("eason-api","/cart/").concat(e.id),i={product_id:e.product_id,qty:Number(e.qty)};this.isLoading=!0,this.status.isUpdateLoading=!0,this.axios.put(a,{data:i}).then((function(e){e.data.success&&(t.getCarts(),t.isLoading=!1,t.status.isUpdateLoading=!1)})).catch((function(e){console.log(e)}))},addCoupon:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("eason-api","/coupon");this.isLoading=!0,this.status.isUpdateLoading=!0,this.axios.post(t,{data:{code:this.coupon_code}}).then((function(t){t.data.success&&(e.getCarts(),e.isLoading=!1,e.status.isCoupon=!0,e.status.isUpdateLoading=!1)})).catch((function(e){console.log(e)}))},onSubmit:function(e,t){var a=this,i=t.restForm;return new Promise((function(e){setTimeout((function(){e(JSON.stringify(a.values))}),2e3),i()}))}},created:function(){this.getProducts(),this.getCarts()}};ee.render=W;t["default"]=ee},e8b5:function(e,t,a){var i=a("c6b6");e.exports=Array.isArray||function(e){return"Array"==i(e)}}}]);
//# sourceMappingURL=chunk-27a71949.b24e1fb1.js.map